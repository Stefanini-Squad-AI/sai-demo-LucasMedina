import{u as M,j as e,a as L,B as i,P as V,g as k,o as E,b as U,N as u,aq as $,ar as G,as as K,a7 as D,l as T,k as F,aQ as q,S as R,v as P,A as B,d as v,a8 as H,ae as Q,aP as Y,y as J,D as X,i as Z,I as _,V as ee,m as se,Y as re,L as ae}from"./mui-bVcw8cZ8.js";import{r as n,a as te}from"./vendor-BPyidg2q.js";import{S as ne}from"./SystemHeader-DB4NlgIL.js";import{u as ie}from"./useApi-EeZ7am_M.js";import{g as oe,a as O,c as le,d as de}from"./index-85Pf7yId.js";import"./userApi-BJ-es0VP.js";import{u as ce,N as W}from"./router-DEfLtG0k.js";import"./redux-B6kvt0Aa.js";function ue(m={}){const o=ce(),[r,p]=n.useState({firstName:"",lastName:"",userId:"",password:"",userType:"U"}),[j,x]=n.useState({}),[l,d]=n.useState(""),t=!0,{mutate:h,loading:w,error:C}=ie(async s=>{if(console.log("üîç Creating user with:",{useMocks:t,request:s}),t)return oe.post("/users/add",s)},{onSuccess:s=>{console.log("‚úÖ User created successfully:",s),d(s.message),A(),m.onSuccess?.(s)},onError:s=>{console.error("‚ùå Error creating user:",s),d(""),m.onError?.(s)}}),c=n.useCallback(()=>{const s={};let a=!0;return r.firstName.trim()||(s.firstName="First Name can NOT be empty...",a=!1),r.lastName.trim()||(s.lastName="Last Name can NOT be empty...",a=!1),r.userId.trim()?r.userId.length>8&&(s.userId="User ID must be 8 characters or less",a=!1):(s.userId="User ID can NOT be empty...",a=!1),r.password.trim()?r.password.length>8&&(s.password="Password must be 8 characters or less",a=!1):(s.password="Password can NOT be empty...",a=!1),r.userType?["A","U"].includes(r.userType)||(s.userType="User Type must be A (Admin) or U (User)",a=!1):(s.userType="User Type can NOT be empty...",a=!1),x(s),a},[r]),g=n.useCallback((s,a)=>{let b=a;(s==="userId"||s==="userType")&&(b=a.toUpperCase());const N={firstName:20,lastName:20,userId:8,password:8,userType:1};b.length<=N[s]&&(p(I=>({...I,[s]:b})),j[s]&&x(I=>({...I,[s]:void 0})),l&&d(""))},[j,l]),y=n.useCallback(async()=>{if(!c())return;const s={userId:r.userId,firstName:r.firstName,lastName:r.lastName,password:r.password,userType:r.userType};await h(s)},[r,c,h]),A=n.useCallback(()=>{p({firstName:"",lastName:"",userId:"",password:"",userType:"U"}),x({}),d("")},[]),S=n.useCallback(()=>{o("/menu/admin")},[o]),f=n.useCallback(()=>{o("/")},[o]);return{formData:r,validationErrors:j,successMessage:l,loading:w,error:C,handleFieldChange:g,handleSubmit:y,clearForm:A,handleBack:S,handleExit:f,validateForm:c}}function me({onSuccess:m,onError:o}){const r=M(),[p,j]=te.useState(!1),{formData:x,validationErrors:l,successMessage:d,loading:t,error:h,handleFieldChange:w,handleSubmit:C,clearForm:c,handleBack:g,handleExit:y}=ue({onSuccess:s=>{m?.(s.message)},onError:s=>{o?.(s)}}),A=n.useCallback(s=>{s.preventDefault(),C()},[C]),S=n.useCallback(s=>{s.key==="F3"?(s.preventDefault(),g()):s.key==="F4"?(s.preventDefault(),c()):s.key==="F12"&&(s.preventDefault(),y())},[g,c,y]),f=(s,a,b="",N,I="text")=>e.jsx(Z,{label:a,value:x[s],onChange:z=>w(s,z.target.value),error:!!l[s],helperText:l[s]||`(${s==="userId"||s==="password"?"8":"20"} Char)`,disabled:t,placeholder:b,type:I,autoComplete:"off",InputProps:{startAdornment:N?e.jsx(F,{position:"start",children:N}):void 0,endAdornment:s==="password"?e.jsx(F,{position:"end",children:e.jsx(_,{onClick:()=>j(!p),edge:"end",disabled:t,children:p?e.jsx(ee,{}):e.jsx(se,{})})}):void 0},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:r.palette.primary.main,borderWidth:2}}}}});return e.jsx(L,{maxWidth:"lg",sx:{py:3},children:e.jsxs(i,{onKeyDown:S,tabIndex:-1,children:[e.jsx(ne,{transactionId:"CU01",programName:"COUSR01C",title:"CardDemo - User Administration",subtitle:"Add New User to System"}),e.jsxs(V,{elevation:3,sx:{borderRadius:3,overflow:"hidden",background:`linear-gradient(145deg, ${k(r.palette.background.paper,.9)}, ${k(r.palette.background.default,.1)})`},children:[e.jsxs(i,{sx:{p:3,textAlign:"center",background:`linear-gradient(135deg, ${r.palette.primary.main}, ${r.palette.secondary.main})`,color:"white"},children:[e.jsx(E,{sx:{fontSize:48,mb:2}}),e.jsx(U,{variant:"h4",fontWeight:600,gutterBottom:!0,children:"Add User"}),e.jsx(U,{variant:"h6",sx:{opacity:.9},children:"Create New System User Account"})]}),e.jsx(i,{sx:{p:4},children:e.jsxs(i,{component:"form",onSubmit:A,sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(u,{container:!0,spacing:3,children:[e.jsx(u,{item:!0,xs:12,md:6,children:f("firstName","First Name","Enter first name",e.jsx(T,{color:"primary"}))}),e.jsx(u,{item:!0,xs:12,md:6,children:f("lastName","Last Name","Enter last name",e.jsx(re,{color:"primary"}))}),e.jsx(u,{item:!0,xs:12,md:6,children:f("userId","User ID","Enter user ID",e.jsx(T,{color:"primary"}))}),e.jsx(u,{item:!0,xs:12,md:6,children:f("password","Password","Enter password",e.jsx(ae,{color:"primary"}),p?"text":"password")}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsxs($,{fullWidth:!0,error:!!l.userType,disabled:t,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(G,{children:"User Type"}),e.jsxs(K,{value:x.userType,onChange:s=>w("userType",s.target.value),label:"User Type",startAdornment:e.jsx(F,{position:"start",children:e.jsx(q,{color:"primary"})}),children:[e.jsx(D,{value:"A",children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(E,{fontSize:"small"}),e.jsx("span",{children:"A - Administrator"})]})}),e.jsx(D,{value:"U",children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(T,{fontSize:"small"}),e.jsx("span",{children:"U - Regular User"})]})})]}),l.userType&&e.jsx(U,{variant:"caption",color:"error",sx:{mt:.5,ml:1.5},children:l.userType})]})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:1,pt:1},children:[e.jsx(U,{variant:"body2",color:"text.secondary",children:"User Type Information:"}),e.jsxs(R,{direction:"row",spacing:1,flexWrap:"wrap",children:[e.jsx(P,{label:"A = Admin",size:"small",color:"warning",variant:"outlined",icon:e.jsx(E,{})}),e.jsx(P,{label:"U = User",size:"small",color:"info",variant:"outlined",icon:e.jsx(T,{})})]})]})})]}),(h||d)&&e.jsxs(i,{sx:{mt:3},children:[h&&e.jsx(B,{severity:"error",sx:{borderRadius:2,mb:2},children:h}),d&&e.jsx(B,{severity:"success",sx:{borderRadius:2},children:d})]}),e.jsx(i,{sx:{mt:4},children:e.jsxs(R,{direction:"row",spacing:2,justifyContent:"center",flexWrap:"wrap",children:[e.jsx(v,{type:"submit",variant:"contained",size:"large",disabled:t,startIcon:e.jsx(H,{}),sx:{px:4,py:1.5,borderRadius:2,fontWeight:600},children:t?"Adding User...":"ENTER = Add User"}),e.jsx(v,{variant:"outlined",size:"large",onClick:c,disabled:t,startIcon:e.jsx(Q,{}),sx:{px:4,py:1.5,borderRadius:2,fontWeight:600},children:"F4 = Clear"}),e.jsx(v,{variant:"outlined",size:"large",onClick:g,disabled:t,startIcon:e.jsx(Y,{}),sx:{px:4,py:1.5,borderRadius:2,fontWeight:600},children:"F3 = Back"}),e.jsx(v,{variant:"text",size:"large",onClick:y,disabled:t,startIcon:e.jsx(J,{}),sx:{px:4,py:1.5,borderRadius:2,fontWeight:600},children:"F12 = Exit"})]})})]})}),e.jsx(X,{}),e.jsx(i,{sx:{p:2,bgcolor:k(r.palette.grey[100],.5),textAlign:"center"},children:e.jsx(U,{variant:"body2",color:"text.secondary",children:"ENTER = Add User ‚Ä¢ F3 = Back ‚Ä¢ F4 = Clear ‚Ä¢ F12 = Exit"})})]})]})})}function Ue(){const m=O(le),o=O(de);return!m||!o?e.jsx(W,{to:"/login",replace:!0}):o.role!=="admin"?e.jsx(W,{to:"/menu/main",replace:!0}):e.jsx(me,{onSuccess:r=>{console.log("‚úÖ User added successfully:",r)},onError:r=>{console.error("‚ùå Error adding user:",r)}})}export{Ue as default};
