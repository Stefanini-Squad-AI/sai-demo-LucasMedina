import{u as X,j as e,a as _,B as n,P as N,g as S,b as r,z as k,i as q,k as ee,h as B,d as C,G as re,J as te,N as o,v as I,O as z,Q as R,A as D,V as se,m as ne,U as A,W,D as y,S as g,X as w,Y as F,Z as ie,_ as T,l as oe,$ as ae,a0 as ce,a1 as le,a2 as E,H as de,K as xe,y as ue}from"./mui-bVcw8cZ8.js";import{r as a}from"./vendor-BPyidg2q.js";import{S as me}from"./SystemHeader-DB4NlgIL.js";import{L as he,g as P}from"./index-85Pf7yId.js";import{u as je}from"./useApi-EeZ7am_M.js";import{u as fe}from"./router-DEfLtG0k.js";import"./redux-B6kvt0Aa.js";function ye({onSearch:l,onExit:d,data:t,loading:u=!1,error:j}){const c=X(),[x,h]=a.useState(""),[i,f]=a.useState(null),[m,M]=a.useState(!1),[V,L]=a.useState(!1),O=[{id:"11111111111",desc:"Active - John Smith - Premium",status:"Active"},{id:"22222222222",desc:"Inactive - Jane Doe - Standard",status:"Inactive"},{id:"33333333333",desc:"High Balance - Robert Johnson - Platinum",status:"Active"},{id:"44444444444",desc:"New Account - Maria Garcia - Basic",status:"Active"}],$=a.useCallback(s=>{const v=s.target.value;/^\d{0,11}$/.test(v)&&(h(v),f(null))},[]),H=a.useCallback(s=>{if(s.preventDefault(),!x.trim()){f("Account number not provided");return}if(x.length!==11||x==="00000000000"){f("Account number must be a non zero 11 digit number");return}l({accountId:x})},[x,l]),Y=a.useCallback(s=>{h(s),f(null),l({accountId:s}),L(!1)},[l]),U=a.useCallback(s=>{(s.key==="F3"||s.key==="Escape")&&(s.preventDefault(),d?.())},[d]),b=a.useCallback(s=>s==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),[]),p=a.useCallback(s=>{if(!s)return"";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return s}},[]),G=a.useCallback(s=>s?m?s:`***-**-${s.slice(-4)}`:"",[m]),J=a.useCallback(s=>s?m?s:`****-****-****-${s.replace(/\D/g,"").slice(-4)}`:"",[m]),K=s=>{switch(s){case"Y":return"success";case"N":return"error";default:return"default"}},Z=s=>{switch(s){case"Y":return"Active";case"N":return"Inactive";default:return"Unknown"}},Q=s=>s?s>0?"error.main":"success.main":"text.primary";return e.jsx(_,{maxWidth:"xl",sx:{py:3},children:e.jsxs(n,{onKeyDown:U,tabIndex:-1,children:[e.jsx(me,{transactionId:"CAVW",programName:"COACTVWC",title:"CardDemo - Account Viewer",subtitle:"View Account Details"}),e.jsxs(N,{elevation:2,sx:{borderRadius:3,overflow:"hidden",background:`linear-gradient(145deg, ${S(c.palette.background.paper,.9)}, ${S(c.palette.background.default,.1)})`},children:[e.jsx(n,{sx:{p:3,textAlign:"center",background:`linear-gradient(135deg, ${c.palette.primary.main}, ${c.palette.secondary.main})`,color:"white"},children:e.jsxs(r,{variant:"h5",fontWeight:600,children:[e.jsx(k,{sx:{mr:1,verticalAlign:"middle"}}),"View Account"]})}),e.jsxs(n,{sx:{p:3},children:[e.jsxs(n,{component:"form",onSubmit:H,sx:{display:"flex",alignItems:"center",gap:2,justifyContent:"center",flexWrap:"wrap",mb:3},children:[e.jsx(r,{variant:"body1",color:"primary.main",fontWeight:600,children:"Account Number:"}),e.jsx(q,{value:x,onChange:$,placeholder:"11111111111",size:"medium",disabled:u,error:!!i,helperText:i,inputProps:{maxLength:11,style:{textAlign:"center",fontSize:"1.1rem",fontWeight:600}},InputProps:{startAdornment:e.jsx(ee,{position:"start",children:e.jsx(B,{color:"primary"})})},sx:{width:200,"& .MuiOutlinedInput-root":{borderRadius:2,"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:c.palette.primary.main,borderWidth:2}}}}}),e.jsx(C,{type:"submit",variant:"contained",disabled:u,startIcon:u?e.jsx(he,{size:20}):e.jsx(re,{}),sx:{borderRadius:2,px:3,fontWeight:600},children:u?"Searching...":"Search"})]}),!1,e.jsx(te,{in:V,children:e.jsxs(N,{variant:"outlined",sx:{p:2,mb:3,bgcolor:S(c.palette.info.main,.05),borderColor:c.palette.info.main},children:[e.jsx(r,{variant:"subtitle2",gutterBottom:!0,color:"info.main",fontWeight:600,children:"Test Accounts (Development Only)"}),e.jsx(o,{container:!0,spacing:1,children:O.map(s=>e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx(C,{variant:"text",size:"small",onClick:()=>Y(s.id),sx:{justifyContent:"flex-start",textAlign:"left",width:"100%",p:1,borderRadius:1,textTransform:"none"},children:e.jsxs(n,{children:[e.jsx(r,{variant:"body2",fontWeight:600,children:s.id}),e.jsx(r,{variant:"caption",color:"text.secondary",children:s.desc})]})})},s.id))})]})}),t&&t.inputValid&&!t.errorMessage&&e.jsxs(n,{sx:{display:"flex",justifyContent:"center",mb:3,gap:2},children:[e.jsx(I,{label:Z(t.accountStatus),color:K(t.accountStatus),variant:"filled",sx:{fontWeight:600,fontSize:"0.875rem"},icon:t.accountStatus==="Y"?e.jsx(z,{}):e.jsx(R,{})}),t.groupId&&e.jsx(I,{label:`${t.groupId} Member`,variant:"outlined",color:"primary",sx:{fontWeight:600}})]}),j&&e.jsx(D,{severity:"error",sx:{mb:3,borderRadius:2},children:j}),t?.errorMessage&&e.jsx(D,{severity:"error",sx:{mb:3,borderRadius:2},children:t.errorMessage}),t?.infoMessage&&!t?.errorMessage&&e.jsx(D,{severity:"info",sx:{mb:3,borderRadius:2},children:t.infoMessage}),t&&t.inputValid&&!t.errorMessage&&e.jsxs(e.Fragment,{children:[e.jsx(n,{sx:{display:"flex",justifyContent:"flex-end",mb:2},children:e.jsxs(C,{variant:"outlined",size:"small",startIcon:m?e.jsx(se,{}):e.jsx(ne,{}),onClick:()=>M(!m),sx:{borderRadius:2},children:[m?"Hide":"Show"," Sensitive Data"]})}),e.jsxs(o,{container:!0,spacing:3,children:[e.jsx(o,{item:!0,xs:12,lg:4,children:e.jsx(A,{elevation:1,sx:{height:"100%"},children:e.jsxs(W,{children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,color:"primary.main",children:[e.jsx(k,{sx:{mr:1,verticalAlign:"middle"}}),"Account Information"]}),e.jsx(y,{sx:{mb:2}}),e.jsxs(g,{spacing:2.5,children:[e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(w,{sx:{fontSize:16,mr:.5}}),"Opened:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:p(t.openDate)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(w,{sx:{fontSize:16,mr:.5}}),"Expiry:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:p(t.expirationDate)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(w,{sx:{fontSize:16,mr:.5}}),"Reissue:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:p(t.reissueDate)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(F,{sx:{fontSize:16,mr:.5}}),"Account Group:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.groupId||"N/A"})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(B,{sx:{fontSize:16,mr:.5}}),"Card Number:"]}),e.jsx(r,{variant:"body1",fontWeight:500,sx:{fontFamily:"monospace"},children:J(t.cardNumber)})]})]})]})})}),e.jsx(o,{item:!0,xs:12,lg:4,children:e.jsx(A,{elevation:1,sx:{height:"100%"},children:e.jsxs(W,{children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,color:"primary.main",children:[e.jsx(ie,{sx:{mr:1,verticalAlign:"middle"}}),"Financial Information"]}),e.jsx(y,{sx:{mb:2}}),e.jsxs(g,{spacing:2.5,children:[e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(T,{sx:{fontSize:16,mr:.5}}),"Credit Limit:"]}),e.jsx(r,{variant:"h6",fontWeight:600,color:"success.main",children:b(t.creditLimit)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(T,{sx:{fontSize:16,mr:.5}}),"Cash Credit Limit:"]}),e.jsx(r,{variant:"body1",fontWeight:500,color:"info.main",children:b(t.cashCreditLimit)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(z,{sx:{fontSize:16,mr:.5}}),"Current Balance:"]}),e.jsx(r,{variant:"h6",fontWeight:600,color:Q(t.currentBalance),children:b(t.currentBalance)})]}),e.jsx(y,{}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(z,{sx:{fontSize:16,mr:.5}}),"Current Cycle Credit:"]}),e.jsx(r,{variant:"body1",fontWeight:500,color:"success.main",children:b(t.currentCycleCredit)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(R,{sx:{fontSize:16,mr:.5}}),"Current Cycle Debit:"]}),e.jsx(r,{variant:"body1",fontWeight:500,color:"error.main",children:b(t.currentCycleDebit)})]})]})]})})}),e.jsx(o,{item:!0,xs:12,lg:4,children:e.jsx(A,{elevation:1,sx:{height:"100%"},children:e.jsxs(W,{children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,color:"primary.main",children:[e.jsx(oe,{sx:{mr:1,verticalAlign:"middle"}}),"Customer Overview"]}),e.jsx(y,{sx:{mb:2}}),e.jsxs(g,{spacing:2.5,children:[e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(F,{sx:{fontSize:16,mr:.5}}),"Customer ID:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.customerId})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(ae,{sx:{fontSize:16,mr:.5}}),"SSN:"]}),e.jsx(r,{variant:"body1",fontWeight:500,sx:{fontFamily:"monospace"},children:G(t.customerSsn)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(w,{sx:{fontSize:16,mr:.5}}),"Date of Birth:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:p(t.dateOfBirth)})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(ce,{sx:{fontSize:16,mr:.5}}),"FICO Score:"]}),e.jsx(I,{label:t.ficoScore,color:t.ficoScore&&t.ficoScore>=750?"success":t.ficoScore&&t.ficoScore>=650?"warning":"error",variant:"filled",sx:{fontWeight:600}})]}),e.jsxs(n,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Primary Card Holder:"}),e.jsx(I,{label:t.primaryCardHolderFlag==="Y"?"Yes":"No",color:t.primaryCardHolderFlag==="Y"?"success":"default",size:"small",variant:"outlined"})]})]})]})})}),e.jsx(o,{item:!0,xs:12,children:e.jsx(A,{elevation:1,children:e.jsxs(W,{children:[e.jsxs(r,{variant:"h6",gutterBottom:!0,color:"primary.main",children:[e.jsx(le,{sx:{mr:1,verticalAlign:"middle"}}),"Contact & Personal Information"]}),e.jsx(y,{sx:{mb:3}}),e.jsxs(o,{container:!0,spacing:3,children:[e.jsxs(o,{item:!0,xs:12,md:4,children:[e.jsx(r,{variant:"subtitle2",gutterBottom:!0,color:"text.secondary",children:"Full Name"}),e.jsx(r,{variant:"h6",fontWeight:500,children:[t.firstName,t.middleName,t.lastName].filter(Boolean).join(" ")})]}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsxs(g,{spacing:1.5,children:[e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(E,{sx:{fontSize:16,mr:.5}}),"Phone 1:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.phoneNumber1||"N/A"})]}),e.jsxs(n,{children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",mb:.5},children:[e.jsx(E,{sx:{fontSize:16,mr:.5}}),"Phone 2:"]}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.phoneNumber2||"N/A"})]})]})}),e.jsx(o,{item:!0,xs:12,md:4,children:e.jsxs(g,{spacing:1.5,children:[e.jsxs(n,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Government ID:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.governmentId||"N/A"})]}),e.jsxs(n,{children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"EFT Account ID:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.eftAccountId||"N/A"})]})]})})]}),e.jsx(y,{sx:{my:3}}),e.jsxs(r,{variant:"subtitle2",gutterBottom:!0,color:"text.secondary",children:[e.jsx(de,{sx:{fontSize:16,mr:.5,verticalAlign:"middle"}}),"Address"]}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Street Address:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.addressLine1}),t.addressLine2&&e.jsx(r,{variant:"body1",fontWeight:500,children:t.addressLine2})]}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"City:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.city||"N/A"})]}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"State:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.state||"N/A"})]}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"ZIP Code:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.zipCode||"N/A"})]}),e.jsxs(o,{item:!0,xs:12,md:6,children:[e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Country:"}),e.jsx(r,{variant:"body1",fontWeight:500,children:t.country||"N/A"})]})]})]})})})]})]})]}),e.jsx(n,{sx:{p:2,bgcolor:S(c.palette.grey[100],.5),borderTop:`1px solid ${c.palette.divider}`},children:e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:1,children:[e.jsxs(r,{variant:"body2",color:"text.secondary",children:[e.jsx(xe,{sx:{fontSize:16,mr:.5,verticalAlign:"middle"}}),"ENTER = Search"]}),e.jsx(C,{variant:"outlined",size:"small",startIcon:e.jsx(ue,{}),onClick:d,disabled:u,sx:{borderRadius:2},children:"F3 = Exit"})]})})]})]})})}function ge(){const[l,d]=a.useState(null),{mutate:t,loading:u,error:j,reset:c}=je(async i=>{const f=parseInt(i.accountId,10);return await P.get(`/account-view?accountId=${f.toString().padStart(11,"0")}`)},{onSuccess:i=>{console.log("âœ… Account search successful:",i),d(i)},onError:i=>{console.error("âŒ Error searching account:",i),d(null)}}),x=a.useCallback(async()=>{try{const i=await P.get("/account-view/initialize");console.log("ðŸ”§ Initialize response:",i),i&&typeof i=="object"&&("success"in i&&i.success&&i.data?d(i.data):"currentDate"in i&&"transactionId"in i&&d(i))}catch(i){console.error("âŒ Error initializing screen:",i)}},[]),h=a.useCallback(()=>{d(null),c()},[c]);return{data:l,loading:u,error:j,searchAccount:t,initializeScreen:x,clearData:h}}function We(){const l=fe(),{data:d,loading:t,error:u,searchAccount:j,initializeScreen:c}=ge();a.useEffect(()=>{if(!localStorage.getItem("userRole")){l("/login");return}c()},[l,c]);const x=()=>{const h=localStorage.getItem("userRole");l(h==="admin"?"/menu/admin":"/menu/main")};return e.jsx(ye,{onSearch:j,onExit:x,data:d,loading:t,error:u})}export{We as default};
