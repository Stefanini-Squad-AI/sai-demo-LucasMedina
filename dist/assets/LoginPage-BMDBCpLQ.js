import{u as M,j as e,a as C,B as o,b as n,f as B,I as v,g as d,M as z,P as W,h as V,S as k,i as T,k as j,l as H,V as K,m as _,L as G,A as D,d as Y,n as q,D as J}from"./mui-bVcw8cZ8.js";import{r as s}from"./vendor-BPyidg2q.js";import{S as Q}from"./SystemHeader-DB4NlgIL.js";import{u as X,a as g,s as Z,b as ee,c as re,d as se,e as R,l as te}from"./index-85Pf7yId.js";import{u as oe,a as ae}from"./router-DEfLtG0k.js";import"./redux-B6kvt0Aa.js";function pe(){const a=M(),m=oe(),w=ae(),l=X(),u=g(Z),p=g(ee),x=g(re),h=g(se),[t,N]=s.useState({userId:"",password:""}),[f,P]=s.useState(!1),[i,I]=s.useState({}),b=s.useRef(!1),O=s.useCallback(()=>{const r=`${window.location.origin}/demo-sai-3-aws/docs/site/index.html`;window.open(r,"_blank","noopener,noreferrer")},[]);s.useEffect(()=>{if(x&&h&&!b.current){console.log("ðŸ”„ User already authenticated, redirecting...",{role:h.role}),b.current=!0;const r=w.state?.from?.pathname;setTimeout(()=>{r&&r!=="/login"?m(r,{replace:!0}):h.role==="admin"?m("/menu/admin",{replace:!0}):m("/menu/main",{replace:!0})},100)}},[x,h,m,w.state]),s.useEffect(()=>{x||(b.current=!1)},[x]);const E=s.useCallback(()=>{const r={};return t.userId.trim()?t.userId.length>8&&(r.userId="User ID must be 8 characters or less."):r.userId="Please enter your user ID.",t.password.trim()?t.password.length>8&&(r.password="Password must be 8 characters or less."):r.password="Please enter your password.",I(r),Object.keys(r).length===0},[t]),A=s.useCallback(r=>c=>{const S=c.target.value;S.length<=8&&(N(y=>({...y,[r]:S.toUpperCase()})),i[r]&&I(y=>({...y,[r]:""})),p&&l(R()))},[i,p,l]),L=s.useCallback(async r=>{if(r.preventDefault(),!!E())try{console.log("ðŸ” Attempting login with:",{userId:t.userId});const c=await l(te(t)).unwrap();console.log("âœ… Login successful, result:",c)}catch(c){console.error("âŒ Login failed:",c)}},[t,E,l]),$=s.useCallback(r=>{(r.key==="F3"||r.key==="Escape")&&(r.preventDefault(),window.confirm("Are you sure you want to exit the system?")&&window.close())},[]),U=s.useCallback(()=>{l(R())},[l]),F=r=>({"Invalid credentials":"Incorrect credentials. Please try again.","User not found":"User not found. Please verify your ID.","Please check your input":"Please check your user ID and password.","Network error occurred":"Unable to verify credentials. Check your connection."})[r]||r;return x&&h?e.jsx(C,{maxWidth:"md",sx:{py:4},children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"Redirecting..."}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"You are already signed in. Redirecting to your dashboard."})]})}):e.jsx(C,{maxWidth:"md",sx:{py:4},children:e.jsxs(o,{onKeyDown:$,tabIndex:-1,children:[e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(Q,{transactionId:"CC00",programName:"COSGN00C",title:"CardDemo - Card Demo Application",subtitle:"Mainframe Modernization",showNavigation:!1}),e.jsx(o,{sx:{position:"absolute",top:8,right:8,zIndex:10},children:e.jsx(B,{title:"View documentation",arrow:!0,children:e.jsx(v,{onClick:O,size:"small",sx:{color:"text.secondary",backgroundColor:d(a.palette.background.paper,.8),backdropFilter:"blur(4px)",border:`1px solid ${d(a.palette.divider,.3)}`,"&:hover":{backgroundColor:d(a.palette.primary.main,.1),color:"primary.main",borderColor:"primary.main"},transition:"all 0.2s ease-in-out"},children:e.jsx(z,{fontSize:"small"})})})})]}),e.jsxs(W,{elevation:3,sx:{borderRadius:3,overflow:"hidden",background:`linear-gradient(145deg, ${d(a.palette.background.paper,.9)}, ${d(a.palette.background.default,.1)})`},children:[e.jsxs(o,{sx:{p:4,textAlign:"center",background:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`,color:"white"},children:[e.jsx(V,{sx:{fontSize:48,mb:2}}),e.jsx(n,{variant:"h4",fontWeight:600,gutterBottom:!0,children:"NATIONAL RESERVE NOTE"}),e.jsx(n,{variant:"h6",sx:{opacity:.9},children:"THE UNITED STATES OF KICSLAND"}),e.jsx(o,{sx:{mt:2,p:2,border:"2px solid rgba(255,255,255,0.3)",borderRadius:2,fontFamily:"monospace",fontSize:"0.75rem",lineHeight:1.2,whiteSpace:"pre",textAlign:"center",overflow:"auto",backgroundColor:"rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"},children:`+========================================+
|%%%%%%%  NATIONAL RESERVE NOTE  %%%%%%%%|
|%(1)  THE UNITED STATES OF KICSLAND (1)%|
|%$$              ___       ********  $$%|
|%$    {x}       (o o)                 $%|
|%$     ******  (  V  )      O N E     $%|
|%(1)          ---m-m---             (1)%|
|%%~~~~~~~~~~~ ONE DOLLAR ~~~~~~~~~~~~~%%|
+========================================+`})]}),e.jsxs(o,{sx:{p:4},children:[e.jsx(n,{variant:"h6",color:"primary.main",textAlign:"center",gutterBottom:!0,sx:{mb:3},children:"Enter your User ID and password, then press ENTER:"}),e.jsx(o,{component:"form",onSubmit:L,sx:{maxWidth:400,mx:"auto"},children:e.jsxs(k,{spacing:3,children:[e.jsx(T,{label:"User ID",value:t.userId,onChange:A("userId"),error:!!i.userId,helperText:i.userId||"(Max 8 characters)",disabled:u,autoFocus:!0,inputProps:{maxLength:8,style:{textTransform:"uppercase"}},InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(H,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(T,{label:"Password",type:f?"text":"password",value:t.password,onChange:A("password"),error:!!i.password,helperText:i.password||"(Max 8 characters)",disabled:u,autoComplete:"current-password",inputProps:{maxLength:8,style:{textTransform:"uppercase"}},InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(G,{color:"primary"})}),endAdornment:e.jsx(j,{position:"end",children:e.jsx(v,{onClick:()=>P(!f),edge:"end",disabled:u,children:f?e.jsx(K,{}):e.jsx(_,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(p||Object.keys(i).length>0)&&e.jsx(e.Fragment,{children:p?e.jsx(D,{severity:"error",onClose:U,sx:{borderRadius:2},children:F(p)}):e.jsx(D,{severity:"error",sx:{borderRadius:2},children:"Please correct the errors above."})}),e.jsx(Y,{type:"submit",variant:"contained",size:"large",disabled:u,startIcon:e.jsx(q,{}),sx:{py:1.5,borderRadius:2,fontWeight:600,fontSize:"1rem"},children:u?"Signing in...":"ENTER = Sign in"})]})}),e.jsx(J,{sx:{my:3}}),e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Sample credentials:"}),e.jsxs(k,{direction:"row",spacing:2,justifyContent:"center",flexWrap:"wrap",children:[e.jsx(n,{variant:"caption",sx:{bgcolor:"warning.main",color:"warning.contrastText",px:1,py:.5,borderRadius:1},children:"Admin: ADMIN001 / PASSWORD"}),e.jsx(n,{variant:"caption",sx:{bgcolor:"success.main",color:"success.contrastText",px:1,py:.5,borderRadius:1},children:"Back-Office: USER001 / PASSWORD"})]})]})]}),e.jsx(o,{sx:{p:2,bgcolor:d(a.palette.grey[100],.5),borderTop:`1px solid ${a.palette.divider}`,textAlign:"center"},children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"ENTER = Sign in â€¢ F3 = Exit"})})]})]})})}export{pe as default};
